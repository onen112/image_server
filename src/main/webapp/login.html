<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <div id="app">
        <form target="iframe">
            <input name="username" v-model="username" type="text" placeholder="用户名" >
            <p></p>
            <input name="password" v-model="password" type="password" placeholder="密码">
            <p></p>
            <button v-on:click ="login">登录</button>
            <button onclick="javascript:(location.href='register.html')">注册账号</button>
        </form>
        <iframe id="iframe" name="iframe" style="display:none;"></iframe>
    </div>

    <script src="js/jquery.min.js"></script>
    <script src="js/vue.js"></script>
    <script>
        var app = new Vue({
            el:"#app",
            data:{
                username:"",
                password:""
            },
            methods:{
                login:function (){
                    $.ajax({
                        url:"login",
                        type:"POST",
                        data:{
                            "username":this.username,
                            "password":this.password
                        },
                        dataType:"json",
                        success:function (ret){
                            if(ret.state == 200){
                                console.log(ret);
                                alert("登录成功！");

                                location.href = "index.html?user=" + ret.user;
                            }
                        }
                    })
                }
            }
        })
    </script>
</body>
</html>